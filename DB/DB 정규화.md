> 참고자료
> https://velog.io/@bsjp400/Database-DB-%EC%A0%95%EA%B7%9C%ED%99%94-%EB%B9%84%EC%A0%95%EA%B7%9C%ED%99%94%EB%9E%80

# DB 정규화
- 관계형 데이터베이스의 설계에서 중복을 최소화하게 데이터를 구조화하는 프로세스
- 이상이 있는 관계를 재구성하여 작고 잘 조직된 관계를 생성하는 것이 목적

## 정규화의 목적
- 불필요한 데이터를 제거, 데이터의 중복을 최소화
  - 테이블 간 FK로 PK를 연결하여 구성하면 디스크 공간 효율적 사용
- 데이터베이스 구조 확장 시 재디자인을 최소화
- 다양한 관점에서의 query를 지원
- 무결성 제약조건의 시행을 간소화
- 각종 이상현상(Anomaly)을 방지
  - 삭제 이상 (Delete Anomaly) : 하나의 칼럼을 지웠을 떄 관련 데이터가 모두 삭제되는 것
  - 삽입 이상 (Insert Anomaly) : 레코드 삽입 시 지정하지 않은 속성값이 NULL값을 갖거나, 원하지 않는 자료가 삽입되는 것
  - 갱신 이상 (Update Anomaly) : 데이터 갱신 시 일관성 유지가 안되는 것

## 정규화 과정
- 비정규 릴레이션 -> 1NF -> 2NF -> 3NF -> BCNF -> 4NF -> 5NF
- 주로 BCNF단계까지 진행

### 1NF (부분적 함수 종속 제거)
- 테이블(Relation)이 1NF를 만족했다는 것은 아래 세 가지 조건을 만족했다는 것을 의미
  - 어떤 Relation에 속한 모든 Domain이 원자값(atomic value)만으로 되어 있다.
  - 모든 attribute에 반복되는 그룹(repeating group)이 나타나지 않는다.
  - 기본 키를 사용하여 관련 데이터의 각 집을 고유하게 식별할 수 있어야 한다.

### 2NF (부분적 함수 종속 제거)
- 2NF를 수행했을 경우 테이블의 모든 컬럼이 완전 함수적 종속을 만족
  - 함수적 종속 : X의 값에 따라 Y값이 결정될 때 X->Y로 표현, 이때 Y는 X에 대해 함수적 종속이라고 함.
  - 함수적 종속에서 X의 값이 여러 요소 일 경우
    - 완전 함수적 종속 : 모든 요소가 Y의 값을 결정할 때
    - 부분 함수적 종속 : 요소들 중 일부만 Y의 값을 결정할 때

### 3NF (이행적 함수 종속 제거)
- 테이블(Realtion)이 3NF를 만족한다는 것은 아래 두 가지 조건을 만족
  - Realtion이 제 2정규화 됨
  - PK가 아닌 속성(Attribute)들은 기본 키에만 의존

### BCNF (Boyce-Codd Normal Form)
- 3NF를 만족하면서 모든 결정자가 후보키 집합에 속한 정규형

## 정규형의 단점
- Relation의 분해로 인해 Relation 간의 연산 (JOIN 연산)이 많아져 성능 저하 가능성

## 반정규화(De-Normalization, 비정규화)
- 정규화된 엔티티, 속성, 관계를 시스템의 성능 향상 및 개발과 운영의 단순화를 위해 중복 통합, 분리 등을 수행하는 데이터 모델링 기법
- 정규화의 단점을 극복하기 위해 사용할 수 있음

## 반정규화가 필요할 때
- 디스크 I/O량이 많아서 조회시 성능이 저하될 때
- 테이블끼리의 경로가 너무 멀어 JOIN으로 인한 성능 저하가 예상될 때
- 칼럼을 계산하여 조회할 때 성능이 저하될 것이 예상될 때
- 즉, 저회에 대한 처리 성능이 중요하다고 판단될 때 부분적으로 반정규화를 고려

## 반정규화의 대상
- 자주 사용되는 테이블에 액세스하는 프로세스의 수가 가장 많은 경우
- 항상 일정한 범위만을 조회하는 경우
- 테이블에 대량 데이터가 있고 대량의 범위를 자주 처리하는 경우
- 성능 상 이슈가 있을 경우
- 테이블에 지나치게 조인을 많이 사용하게 되어 데이터를 조회하는 것이 기술적으로 어려운 경우

## 반정규화의 주의점
- 반정규화를 과도하게 적용하면 데이터의 무결성이 깨질 수 있음.
- 입력, 수정, 삭제 요청의 응답 시간이 늦어질 수 있음.
