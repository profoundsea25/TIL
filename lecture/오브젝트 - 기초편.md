# [오브젝트 - 기초편](https://www.inflearn.com/course/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8-%EA%B8%B0%EC%B4%88%ED%8E%B8-%EA%B0%9D%EC%B2%B4%EC%A7%80%ED%96%A5)
- 강사: 조영호

## 1-1. 영화 예매 도메인
- 도메인
  - 사용자가 프로그램을 사용하는 주제 영역
  - 소프트웨어로 구현할 요구사항의 범위

## 2-1. 절차적인 설계
- 먼저 데이터 모델(무엇을 저장할지)를 설계
- 프로세스(알고리즘) 설계
  - 로직을 실행 순서대로 클래스 안에 배치
- 객체의 타입을 판단하고 타입에 따라 어떤 일을 할지를 그 객체 외부에서 결정하고 있다면 절차적 프로그래밍이다.
- 데이터가 사용될 문맥을 고려하지 않고 독립적으로 데이터 설계
- 데이터가 완성되면 외부의 프로세스에 데이터 처리를 위한 로직 구현
- 중앙집중식 제어 스타일이 된다. (하나의 클래스에서 전체 흐름을 제어하게 된다.)

## 2-1-예제. 절차적인 설계
- (참고) 예제에서는 `domain` 패키지에는 데이터를 저장하기 위한 데이터 클래스를 정의

## 2-2. 변경과 의존성
- 절차적인 설계의 문제점은 데이터를 구현한 코드를 "수정"할 때 발생한다.
  - 데이터가 변경될 때 프로세스도 함께 변경된다.
- 의존성(Dependency) = 다른 코드가 수정될 때 함께 수정될 수 있는 가능성
  - "A가 B에 의존한다." = "B의 코드를 변경할 때, A의 코드도 변경된다."
  - 변경의 방향은 의존성의 방향과 반대다.
- 문맥과 무관하게, 모든 경우에도 접근/수정이 가능하도록 설계하면 데이터 변경을 추적하기 어렵다.
- 변경하기 쉬운 설계를 만들기 위해서는 의존성을 통제해야 한다.
  - 데이터 변경으로 인한 파급효과를 막는 것이 핵심이다.
  - 따라서 데이터와 프로세스를 통합한다.

## 2-3. 데이터와 프로세스 통합하기
- 데이터를 사용하는 프로세스 로직을 데이터 내부로 이동
- 데이터의 getter를 사용해서 판단하고 결정하는 로직은 그 데이터로 옮기기
  - 이는 책임의 이동이다.
  - 책임이란, 데이터를 이용해서 의사 결정을 하거나 데이터의 상태를 변경하는 로직이다.
  - 자기 자신의 상태를 직접 관리하고 스스로 판단하고 결정하는, 자율적인 객체를 만든다.
- 데이터와 객체의 차이
  - 가장 큰 차이점은 자율성이다.
  - 데이터는 수동적이고, 객체는 자율적이다.
  - 객체는 내부 데이터를 능동적으로 사용할 수 있어야 한다.

## 2-4. 절차에서 객체로
- 의존성 개수 줄이기
  - 도메인 구조와 비슷하게 객체의 구조를 변경하기
- 코드가 변경하기 쉬워졌는지 확인하려면, 관련된 타입과 기능을 추가해보기
  - 변경해야 할 코드가 많아졌는가? 적어졌는가? 확인하기.
  - 변경의 영향이 줄었다면 좋은 신호다.
- 객체를 똑똑하게 만들기 위해서는 "객체가 사용될 문맥"을 함께 설계해야 한다.
  - 이를 책임 주도 설계라고 한다.
  - 어떠한 문맥도 없이 사용할 수 있게 만들려고 하면, 객체가 수동적(=getter, setter 밖에 없다.)으로 될 수 밖에 없다.

## 2-4-예제. 절차에서 객체로
- 데이터와 프로세스를 결합한다. 이는 외부의 의존성을 줄일 수 있으며, 수정 범위를 좁힐 수 있다.
- 상태와 행동을 객체에 단일화 하는 이유는 변경의 안정성을 높이기 위함이다.

## 3-1. 객체지향 설계 원칙
- 설계(Design)란 코드를 배치하는 방식이다.
  - 설계는 요구사항이 변경 될 때, 코드를 더 쉽게 수정하기 위함이다.
  - 이는 객체 지향 설계가 필요한 이유이기도 하다.
  - 객체 지향 설계의 중심은 "변경"이다.
- 객체 지향 설계 원칙
  1. 협력에 필요한 **행동을 먼저 결정**하고, 행동에 적합한 **객체를 나중에** 선택하라.
     - **제한된 문맥**을 고려하여 행동을 결정한다.
  2. 객체의 **행동을 먼저 구현**하고, 행동에 필요한 **데이터를 나중에** 선택하라.

## 3-2. 책임 주도 설계
- 객체 지향 설계 흐름
  - 협력을 위한 문맥 결정
  - 필요한 책임(=행동)을 식별
  - 책임을 수행할 객체 선택
  - 책임 구현
  - 데이터 결정
- 책임(Responsibility): 협력에 참여하기 위해 객체가 수행하는 행동
  - 하는 것(Doing)과 아는 것(Knowing)을 포함
  - 책임은 세부사항과 관련된 결정을 뒤로 미루고 객체들의 협력 구조에 초점을 맞출 수 있게 한다.
- 애플리케이션이 외부에 제공해야 하는 기능을 "문맥"이라고 한다.
- 책임 주도 설계
  - 애플리케이션이 제공할 기능을 파악
  - 애플리케이션의 기능 요구사항을 시스템의 책임으로 변환
  - 시스템의 책임을 객체의 책임으로 변환
  - 책임을 담당할 적절한 객체 선택
  - 객체의 책임 일부를 수행하기 위해 외부의 도움이 필요하다면 다른 객체에게 도움을 요청
  - 이 요청을 또 다른 객체의 책임으로 변환
  - 책임을 담당할 적절한 객체 선택
- 핵심은 책임 할당
  - 어떤 객체에게 책임을 할당할 것인가?
- 객체 협력(런타임)에서 클래스 구조(컴파일타임)의 순서로 진행

## 3-3. 표현적 차이 줄이기
- 절차적인 설계는 알고리즘을 실행 순서대로 배치한다.
- 객체지향 설계는 알고리즘을 책임 관점에서 여러 객체로 분배한다.
- 도메인 모델
  - 도메인에 중요한 개념과 관계의 집합
  - 객체지향 설계의 재료는 도메인의 추상화이다.
  - 후보 객체를 찾을 때 가장 먼저 참고하는 개념과 관계의 집합이다.
- 도메인 모델을 참고하는 이유는, 표현적 차이를 줄이기 위함이다.
  - 표현적 차이란, 도메인의 개념적 모델과 소프트웨어 구현 사이의 거리이다.
  - 표현적 차이를 줄이는 이유는 변경하기 쉬운 유연한 설계를 만들기 위함이다.
- 도메인의 개념과 기본 구조는 비즈니스가 바뀌지 않는 이상 그대로 유지된다.
  - 안정적인 도메인 구조에 기반한 코드 구조 역시 변경에 안정적이다.
- 객체가 도메인 개념을 은유하도록 해야 한다.
  - 책임을 수행하는데 적합한 객체를 도메인 개념과 연결시킨다.

## 4-1. 정보와 책임 할당 - 정보 전문가
- 어떤 객체에게 책임을 할당할 것인가?
  - "정보 전문가" 패턴
    - 책임을 수행하는데 필요한 정보를 가장 많이 알고 있는 객체에 책임을 할당
    - 정보 = 데이터가 아닌 외부에 제공하는 행동
    - 행동을 수행할수만 있다면 어떤 방식으로 구현해도 상관없다.
- 객체 지향은 공통의 멘탈 모델을 만드는 과정이다.
- 객체는 내부 상태보다 행동(책임)이 중요하다.
  - 행동을 결정한 후 데이터를 결정하라.

## 4-2. 설계 트레이드오프 - 창조자와 낮은 결합도
- 창조자 패턴
  - 새로운 인스턴스 생성하는 책임을 어떤 객체에게 할당할 것인가?
  - 조건을 하나라도 만족하면 A의 인스턴스를 생성할 책임을 B에게 할당
    - B가 A를 포함하거나 참조한다.
    - B가 A를 기록한다.
    - B가 A를 긴밀하게 사용한다.
    - B가 A를 초기화하는 데 필요한 정보를 알고 있다.
  - = 밀접한 관계를 가지는 객체에 생성 책임을 할당하라.
- 낮은 결합도
  - 결합도: 객체들이 서로 연관되어 있는 정도
  - 어떻게 낮은 의존성을 유지하고, 변경에 따른 영향을 줄이면서, 재사용성을 높일 수 있을까?
  - 설계의 전체적인 결합도를 낮게 유지할 수 있도록 책임을 할당하라
	- 낮은 결합도를 가질수록 코드를 더 쉽게 수정할 수 있다.

## 4-3. 설계 트레이드오프 - 높은 응집도
- 높은 응집도?
  - 한 요소의 책임들이 얼마나 강력하게 관련되고 집중되어 있는가
  - 연관성 높은 책임들을 가지면서 너무 많은 일을 하지 않는 객체에 책임 할당
  - 서로 관련 없는 두 가지 책임이 하나의 객체에 공존한다면, 낮은 응집도를 의미한다.
- 높은 응집도가 중요한 이유는, 수정하기 쉬운 설계를 위해서다.

## 4-4. 유연한 설계 - 다형성
- 타입을 기반으로 유사하지만 서로 다르게 행동할 때, 다형성 패턴을 적용할 수 있다.
  - 조건문을 사용하지 않고 변하는 행동을 구현한다.

## 4-5. 결합도 낮추기 - 변경 보호
- 다형적인 메시지
  - 메시지란, 객체들이 협력하기 위해 사용할 수 있는 유일한 의사소통 수단이다.
    - 쉽게 말하면 메서드 호출이다.
  - 책임을 수행하는 방법이 달라도 책임이 동일하다면, 메시지를 통일한다.
  - 그리고 타입에 따라 적절한 방법을 객체 스스로 선택한다.
  - 즉, 동일한 요청, 타입에 따른 다른 행동, 동일한 결과 반환이다.
- 변경 보호
  - 변화가 예상되거나 불안정한 지점을 식별
  - 그 주위에 안정적인 인터페이스 또는 추상화를 형성하도록 책임을 할당
    - 안정적인 추상화 뒤로 변하는 타입 숨기기
- 다형성
  - 메시지가 동일하더라도 수신한 객체의 타입에 따라 실제로 수행하는 행동이 달라지는 능력
  - 다른 타입에 의한 대체 가능성을 의미
- 역할
  - 다른 것으로 대체할 수 있는 책임의 집합
  - 역할과 객체는 같을수도 있고 다를 수도 있다.

## 5-1. 객체 구현하기
- 객체지향 설계 순서
  - 객체의 행동을 먼저 결정하고, 행동에 적합한 객체를 나중에 선택한다.
  - 객체의 행동을 먼저 구현하고, 행동에 필요한 데이터를 나중에 할당한다.
